"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

var _Flux = require("../Flux");

var Flux = _Flux.Flux;
var Store = _Flux.Store;
var Actions = _Flux.Actions;

var sinon = _interopRequire(require("sinon"));

function createSerializableStore(serializedState) {
  return (function (_Store) {
    function SerializableStore() {
      _classCallCheck(this, SerializableStore);

      if (_Store != null) {
        _Store.apply(this, arguments);
      }
    }

    _inherits(SerializableStore, _Store);

    _createClass(SerializableStore, null, {
      serialize: {
        value: function serialize() {
          return serializedState;
        }
      },
      deserialize: {
        value: function deserialize(stateString) {
          return {
            stateString: stateString,
            deserialized: true
          };
        }
      }
    });

    return SerializableStore;
  })(Store);
}

describe("Flux", function () {

  describe("#createStore()", function () {
    it("throws if key already exists", function () {
      var flux = new Flux();

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        return TestStore;
      })(Store);

      flux.createStore("ExampleStore", TestStore);
      expect(flux.createStore.bind(flux, "ExampleStore", TestStore)).to["throw"]("You've attempted to create multiple stores with key ExampleStore. " + "Keys must be unique.");
    });

    it("throws if Store is not a prototype of class", function () {
      var flux = new Flux();

      var ForgotToExtendStore = function ForgotToExtendStore() {
        _classCallCheck(this, ForgotToExtendStore);
      };

      expect(flux.createStore.bind(flux, "Flux", ForgotToExtendStore)).to["throw"]("You've attempted to create a store from the class " + "ForgotToExtendStore, which does not have the base Store class in its " + "prototype chain. Make sure you're using the `extends` keyword: " + "`class ForgotToExtendStore extends Store { ... }`");
    });

    it("registers store's handler with central dispatcher", function () {
      var ExampleStore = (function (_Store) {
        function ExampleStore() {
          _classCallCheck(this, ExampleStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(ExampleStore, _Store);

        return ExampleStore;
      })(Store);

      var spy1 = sinon.spy();
      var spy2 = sinon.spy();

      ExampleStore.prototype.foo = "bar";
      ExampleStore.prototype.handler = function (_payload) {
        spy1(_payload);
        spy2(this.foo);
      };

      var flux = new Flux();
      flux.createStore("ExampleStore", ExampleStore);

      var payload = "foobar";
      flux.dispatch("actionId", payload);
      expect(spy1.getCall(0).args[0].body).to.equal("foobar");
      expect(spy2.calledWith("bar")).to.be["true"];
    });

    it("returns the created store instance", function () {
      var ExampleStore = (function (_Store) {
        function ExampleStore() {
          _classCallCheck(this, ExampleStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(ExampleStore, _Store);

        return ExampleStore;
      })(Store);

      var flux = new Flux();
      var store = flux.createStore("ExampleStore", ExampleStore);
      expect(store).to.be.an.instanceOf(ExampleStore);
    });
  });

  describe("#getStore()", function () {
    it("retrieves store for key", function () {
      var flux = new Flux();

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        return TestStore;
      })(Store);

      flux.createStore("ExampleStore", TestStore);
      expect(flux.getStore("ExampleStore")).to.be.an.instanceOf(Store);
      expect(flux.getStore("NonexistentStore")).to.be.undefined;
    });
  });

  describe("#removeStore()", function () {
    it("throws if key does not exist", function () {
      var flux = new Flux();

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        return TestStore;
      })(Store);

      flux.createStore("ExampleStore", TestStore);
      expect(flux.removeStore.bind(flux, "NonexistentStore")).to["throw"]("You've attempted to remove store with key NonexistentStore which does not exist.");
    });

    it("deletes store instance", function () {
      var flux = new Flux();

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        return TestStore;
      })(Store);

      var store = flux.createStore("ExampleStore", TestStore);
      expect(flux.dispatcher.$Dispatcher_callbacks[store._token]).to.be["function"];
      flux.removeStore("ExampleStore");
      expect(flux._stores.ExampleStore).to.be.undefined;
      expect(flux.dispatcher.$Dispatcher_callbacks[store._token]).to.be.undefined;
    });
  });

  describe("#createActions()", function () {
    it("throws if key already exists", function () {
      var TestActions = (function (_Actions) {
        function TestActions() {
          _classCallCheck(this, TestActions);

          if (_Actions != null) {
            _Actions.apply(this, arguments);
          }
        }

        _inherits(TestActions, _Actions);

        return TestActions;
      })(Actions);

      var flux = new Flux();
      flux.createActions("ExampleActions", TestActions);

      expect(flux.createActions.bind(flux, "ExampleActions", Actions)).to["throw"]("You've attempted to create multiple actions with key ExampleActions. " + "Keys must be unique.");
    });

    it("throws if Actions is a class without base Actions class in its prototype chain", function () {
      var flux = new Flux();

      var ForgotToExtendActions = function ForgotToExtendActions() {
        _classCallCheck(this, ForgotToExtendActions);
      };

      expect(flux.createActions.bind(flux, "Flux", ForgotToExtendActions)).to["throw"]("You've attempted to create actions from the class " + "ForgotToExtendActions, which does not have the base Actions class " + "in its prototype chain. Make sure you're using the `extends` " + "keyword: `class ForgotToExtendActions extends Actions { ... }`");
    });

    it("accepts plain old JavaScript object", function () {
      var flux = new Flux();

      flux.createActions("foobar", {
        foo: function foo() {
          return "bar";
        },

        bar: function bar() {
          return "baz";
        }
      });

      expect(flux.getActions("foobar")).to.be.an["instanceof"](Actions);
      expect(flux.getActions("foobar").foo()).to.equal("bar");
      expect(flux.getActions("foobar").bar()).to.equal("baz");
    });

    it("returns the created action's instance", function () {
      var TestActions = (function (_Actions) {
        function TestActions() {
          _classCallCheck(this, TestActions);

          if (_Actions != null) {
            _Actions.apply(this, arguments);
          }
        }

        _inherits(TestActions, _Actions);

        return TestActions;
      })(Actions);

      var flux = new Flux();
      var actions = flux.createActions("TestActions", TestActions);
      expect(actions).to.be.an.instanceOf(TestActions);
    });
  });

  describe("#getActions()", function () {
    var TestActions = (function (_Actions) {
      function TestActions() {
        _classCallCheck(this, TestActions);

        if (_Actions != null) {
          _Actions.apply(this, arguments);
        }
      }

      _inherits(TestActions, _Actions);

      return TestActions;
    })(Actions);

    it("retrieves actions for key", function () {
      var flux = new Flux();
      flux.createActions("TestActions", TestActions);

      expect(flux.getActions("TestActions")).to.be.an.instanceOf(Actions);
      expect(flux.getActions("NonexistentActions")).to.be.undefined;
    });
  });

  describe("#getActionIds() / #getConstants()", function () {
    var TestActions = (function (_Actions) {
      function TestActions() {
        _classCallCheck(this, TestActions);

        if (_Actions != null) {
          _Actions.apply(this, arguments);
        }
      }

      _inherits(TestActions, _Actions);

      _createClass(TestActions, {
        getFoo: {
          value: function getFoo() {}
        }
      });

      return TestActions;
    })(Actions);

    it("retrives ids of actions for key", function () {
      var flux = new Flux();
      flux.createActions("TestActions", TestActions);

      expect(flux.getActionIds("TestActions").getFoo).to.be.a("string");
      expect(flux.getActionIds("NonexistentActions")).to.be.undefined;

      expect(flux.getConstants("TestActions").getFoo).to.be.a("string");
      expect(flux.getConstants("NonexistentActions")).to.be.undefined;
    });
  });

  describe("#removeActions()", function () {
    it("throws if key does not exist", function () {
      var flux = new Flux();

      var TestActions = (function (_Actions) {
        function TestActions() {
          _classCallCheck(this, TestActions);

          if (_Actions != null) {
            _Actions.apply(this, arguments);
          }
        }

        _inherits(TestActions, _Actions);

        return TestActions;
      })(Actions);

      flux.createActions("TestActions", TestActions);
      expect(flux.removeActions.bind(flux, "NonexistentActions")).to["throw"]("You've attempted to remove actions with key NonexistentActions which does not exist.");
    });

    it("deletes actions instance", function () {
      var flux = new Flux();

      var TestActions = (function (_Store) {
        function TestActions() {
          _classCallCheck(this, TestActions);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestActions, _Store);

        return TestActions;
      })(Store);

      flux.createStore("TestActions", TestActions);
      flux.removeStore("TestActions");
      expect(flux._actions.TestActions).to.be.undefined;
    });
  });

  describe("#getAllActionIds() / #getAllConstants()", function () {
    var TestFooActions = (function (_Actions) {
      function TestFooActions() {
        _classCallCheck(this, TestFooActions);

        if (_Actions != null) {
          _Actions.apply(this, arguments);
        }
      }

      _inherits(TestFooActions, _Actions);

      _createClass(TestFooActions, {
        getFoo: {
          value: function getFoo() {}
        },
        getBar: {
          value: function getBar() {}
        }
      });

      return TestFooActions;
    })(Actions);

    var TestBarActions = (function (_Actions2) {
      function TestBarActions() {
        _classCallCheck(this, TestBarActions);

        if (_Actions2 != null) {
          _Actions2.apply(this, arguments);
        }
      }

      _inherits(TestBarActions, _Actions2);

      _createClass(TestBarActions, {
        getFoo: {
          value: function getFoo() {}
        },
        getBar: {
          value: function getBar() {}
        }
      });

      return TestBarActions;
    })(Actions);

    it("retrives ids of all actions", function () {
      var flux = new Flux();
      flux.createActions("TestFooActions", TestFooActions);
      flux.createActions("TestBarActions", TestBarActions);

      expect(flux.getAllActionIds()).to.be.an("array");
      expect(flux.getAllActionIds()[0]).to.be.a("string");
      expect(flux.getAllActionIds()).to.have.length(4);

      expect(flux.getAllConstants()).to.be.an("array");
      expect(flux.getAllConstants()[0]).to.be.a("string");
      expect(flux.getAllConstants()).to.have.length(4);
    });
  });

  describe("#dispatch()", function () {

    it("delegates to dispatcher", function () {
      var flux = new Flux();
      var dispatch = sinon.spy();
      flux.dispatcher = { dispatch: dispatch };
      var actionId = "actionId";

      flux.dispatch(actionId, "foobar");

      expect(dispatch.firstCall.args[0]).to.deep.equal({
        actionId: actionId,
        body: "foobar"
      });
    });

    it("emits dispatch event", function () {
      var flux = new Flux();
      var listener = sinon.spy();

      flux.addListener("dispatch", listener);

      var actionId = "actionId";

      flux.dispatch(actionId, "foobar");

      expect(listener.calledOnce).to.be["true"];
      expect(listener.firstCall.args[0]).to.deep.equal({
        actionId: actionId,
        body: "foobar"
      });
    });
  });

  describe("#dispatchAsync()", function () {

    it("delegates to dispatcher", function callee$2$0() {
      var flux, dispatch, actionId;
      return regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            flux = new Flux();
            dispatch = sinon.spy();

            flux.dispatcher = { dispatch: dispatch };
            actionId = "actionId";
            context$3$0.next = 6;
            return flux.dispatchAsync(actionId, Promise.resolve("foobar"));

          case 6:

            expect(dispatch.callCount).to.equal(2);
            expect(dispatch.firstCall.args[0]).to.deep.equal({
              actionId: actionId,
              async: "begin"
            });
            expect(dispatch.secondCall.args[0]).to.deep.equal({
              actionId: actionId,
              body: "foobar",
              async: "success"
            });

          case 9:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("emits dispatch event", function callee$2$1() {
      var flux, listener, actionId;
      return regeneratorRuntime.async(function callee$2$1$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            flux = new Flux();
            listener = sinon.spy();

            flux.addListener("dispatch", listener);

            actionId = "actionId";
            context$3$0.next = 6;
            return flux.dispatchAsync(actionId, Promise.resolve("foobar"));

          case 6:

            expect(listener.calledTwice).to.be["true"];
            expect(listener.firstCall.args[0]).to.deep.equal({
              actionId: actionId,
              async: "begin"
            });
            expect(listener.secondCall.args[0]).to.deep.equal({
              actionId: actionId,
              async: "success",
              body: "foobar"
            });

          case 9:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("resolves to value of given promise", function (done) {
      var flux = new Flux();
      var dispatch = sinon.spy();
      flux.dispatcher = { dispatch: dispatch };
      var actionId = "actionId";

      expect(flux.dispatchAsync(actionId, Promise.resolve("foobar"))).to.eventually.equal("foobar").notify(done);
    });

    it("dispatches with error if promise rejects", function callee$2$2() {
      var flux, dispatch, actionId, error;
      return regeneratorRuntime.async(function callee$2$2$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            flux = new Flux();
            dispatch = sinon.spy();

            flux.dispatcher = { dispatch: dispatch };
            actionId = "actionId";
            error = new Error("error");
            context$3$0.next = 7;
            return flux.dispatchAsync(actionId, Promise.reject(error));

          case 7:

            expect(dispatch.callCount).to.equal(2);
            expect(dispatch.firstCall.args[0]).to.deep.equal({
              actionId: actionId,
              async: "begin"
            });
            expect(dispatch.secondCall.args[0]).to.deep.equal({
              actionId: actionId,
              error: error,
              async: "failure"
            });

          case 10:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("emit errors that occur as result of dispatch", function callee$2$3() {
      var ExampleStore, flux, listener, actionId, store;
      return regeneratorRuntime.async(function callee$2$3$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            ExampleStore = (function (_Store) {
              function ExampleStore() {
                _classCallCheck(this, ExampleStore);

                if (_Store != null) {
                  _Store.apply(this, arguments);
                }
              }

              _inherits(ExampleStore, _Store);

              return ExampleStore;
            })(Store);

            flux = new Flux();
            listener = sinon.spy();

            flux.addListener("error", listener);

            actionId = "actionId";
            store = flux.createStore("example", ExampleStore);

            store.registerAsync(actionId, null, function () {
              throw new Error("success error");
            }, function () {
              throw new Error("failure error");
            });

            context$3$0.next = 9;
            return expect(flux.dispatchAsync(actionId, Promise.resolve("foobar"))).to.be.rejectedWith("success error");

          case 9:
            expect(listener.calledOnce).to.be["true"];
            expect(listener.firstCall.args[0].message).to.equal("success error");

            context$3$0.next = 13;
            return expect(flux.dispatchAsync(actionId, Promise.reject(new Error("foobar")))).to.be.rejectedWith("failure error");

          case 13:
            expect(listener.calledTwice).to.be["true"];
            expect(listener.secondCall.args[0].message).to.equal("failure error");

          case 15:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });
  });

  describe("#removeAllStoreListeners", function () {
    it("removes all listeners from stores", function () {
      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        return TestStore;
      })(Store);

      var flux = new Flux();
      var storeA = flux.createStore("storeA", TestStore);
      var storeB = flux.createStore("storeB", TestStore);

      var listener = function listener() {};

      storeA.addListener("change", listener);
      storeA.addListener("change", listener);
      storeB.addListener("change", listener);
      storeB.addListener("change", listener);

      expect(storeA.listeners("change").length).to.equal(2);
      expect(storeB.listeners("change").length).to.equal(2);

      flux.removeAllStoreListeners();

      expect(storeA.listeners("change").length).to.equal(0);
      expect(storeB.listeners("change").length).to.equal(0);
    });
  });

  describe("#serialize()", function () {

    it("returns state of all the stores as a JSON string", function () {
      var flux = new Flux();

      flux.createStore("foo", createSerializableStore("foo state"));
      flux.createStore("bar", createSerializableStore("bar state"));
      flux.createStore("baz", createSerializableStore("baz state"));

      expect(JSON.parse(flux.serialize())).to.deep.equal({
        foo: "foo state",
        bar: "bar state",
        baz: "baz state"
      });
    });

    it("ignores stores whose classes do not implement .serialize()", function () {
      var flux = new Flux();

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        return TestStore;
      })(Store);

      flux.createStore("foo", createSerializableStore("foo state"));
      flux.createStore("bar", createSerializableStore("bar state"));
      flux.createStore("baz", TestStore);

      expect(JSON.parse(flux.serialize())).to.deep.equal({
        foo: "foo state",
        bar: "bar state"
      });
    });

    it("warns if any store classes .serialize() returns a non-string", function () {
      var flux = new Flux();
      var warn = sinon.spy(console, "warn");

      flux.createStore("foo", createSerializableStore({}));
      flux.serialize();

      expect(warn.firstCall.args[0]).to.equal("The store with key 'foo' was not serialized because the static " + "method `SerializableStore.serialize()` returned a non-string with " + "type 'object'.");

      console.warn.restore();
    });

    it("warns and skips stores whose classes do not implement .deserialize()", function () {
      var flux = new Flux();
      var warn = sinon.spy(console, "warn");

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        _createClass(TestStore, null, {
          serialize: {
            value: function serialize() {
              return "state string";
            }
          }
        });

        return TestStore;
      })(Store);

      flux.createStore("test", TestStore);
      flux.serialize();

      expect(warn.firstCall.args[0]).to.equal("The class `TestStore` has a `serialize()` method, but no " + "corresponding `deserialize()` method.");

      console.warn.restore();
    });
  });

  describe("#deserialize()", function () {

    it("converts a serialized string into state and uses it to replace state of stores", function () {
      var flux = new Flux();

      flux.createStore("foo", createSerializableStore());
      flux.createStore("bar", createSerializableStore());
      flux.createStore("baz", createSerializableStore());

      flux.deserialize("{\n        \"foo\": \"foo state\",\n        \"bar\": \"bar state\",\n        \"baz\": \"baz state\"\n      }");

      var fooStore = flux.getStore("foo");
      var barStore = flux.getStore("bar");
      var bazStore = flux.getStore("baz");

      expect(fooStore.state.stateString).to.equal("foo state");
      expect(fooStore.state.deserialized).to.be["true"];
      expect(barStore.state.stateString).to.equal("bar state");
      expect(barStore.state.deserialized).to.be["true"];
      expect(bazStore.state.stateString).to.equal("baz state");
      expect(bazStore.state.deserialized).to.be["true"];
    });

    it("warns and skips if passed string is invalid JSON", function () {
      var flux = new Flux();

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        return TestStore;
      })(Store);

      flux.createStore("foo", TestStore);

      expect(flux.deserialize.bind(flux, "not JSON")).to["throw"]("Invalid value passed to `Flux#deserialize()`: not JSON");
    });

    it("warns and skips stores whose classes do not implement .serialize()", function () {
      var flux = new Flux();
      var warn = sinon.spy(console, "warn");

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        _createClass(TestStore, null, {
          deserialize: {
            value: function deserialize() {
              return {};
            }
          }
        });

        return TestStore;
      })(Store);

      flux.createStore("test", TestStore);
      flux.deserialize("{\"test\": \"test state\"}");

      expect(warn.firstCall.args[0]).to.equal("The class `TestStore` has a `deserialize()` method, but no " + "corresponding `serialize()` method.");

      console.warn.restore();
    });

    it("ignores stores whose classes do not implement .deserialize()", function () {
      var flux = new Flux();

      var TestStore = (function (_Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (_Store != null) {
            _Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, _Store);

        return TestStore;
      })(Store);

      flux.createStore("foo", createSerializableStore());
      flux.createStore("bar", createSerializableStore());
      flux.createStore("baz", TestStore);

      flux.deserialize("{\n        \"foo\": \"foo state\",\n        \"bar\": \"bar state\",\n        \"baz\": \"baz state\"\n      }");

      var fooStore = flux.getStore("foo");
      var barStore = flux.getStore("bar");
      var bazStore = flux.getStore("baz");

      expect(fooStore.state.stateString).to.equal("foo state");
      expect(fooStore.state.deserialized).to.be["true"];
      expect(barStore.state.stateString).to.equal("bar state");
      expect(barStore.state.deserialized).to.be["true"];
      expect(bazStore.state).to.be["null"];
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fX3Rlc3RzX18vRmx1eC10ZXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7b0JBQXFDLFNBQVM7O0lBQXJDLElBQUksU0FBSixJQUFJO0lBQUUsS0FBSyxTQUFMLEtBQUs7SUFBRSxPQUFPLFNBQVAsT0FBTzs7SUFDdEIsS0FBSywyQkFBTSxPQUFPOztBQUV6QixTQUFTLHVCQUF1QixDQUFDLGVBQWUsRUFBRTtBQUNoRDthQUFhLGlCQUFpQjs0QkFBakIsaUJBQWlCOzs7Ozs7O2NBQWpCLGlCQUFpQjs7aUJBQWpCLGlCQUFpQjtBQUNyQixlQUFTO2VBQUEscUJBQUc7QUFDakIsaUJBQU8sZUFBZSxDQUFDO1NBQ3hCOztBQUNNLGlCQUFXO2VBQUEscUJBQUMsV0FBVyxFQUFFO0FBQzlCLGlCQUFPO0FBQ0wsdUJBQVcsRUFBWCxXQUFXO0FBQ1gsd0JBQVksRUFBRSxJQUFJO1dBQ25CLENBQUM7U0FDSDs7OztXQVRVLGlCQUFpQjtLQUFTLEtBQUssRUFVMUM7Q0FDSDs7QUFFRCxRQUFRLENBQUMsTUFBTSxFQUFFLFlBQU07O0FBRXJCLFVBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxZQUFNO0FBQy9CLE1BQUUsQ0FBQyw4QkFBOEIsRUFBRSxZQUFNO0FBQ3ZDLFVBQU0sSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7O1VBQ2xCLFNBQVM7aUJBQVQsU0FBUztnQ0FBVCxTQUFTOzs7Ozs7O2tCQUFULFNBQVM7O2VBQVQsU0FBUztTQUFTLEtBQUs7O0FBRTdCLFVBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQzVDLFlBQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFNLENBQ3JFLG9FQUFxRSxHQUNyRSxzQkFBc0IsQ0FDdkIsQ0FBQztLQUNILENBQUMsQ0FBQzs7QUFFSCxNQUFF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IHsgRmx1eCwgU3RvcmUsIEFjdGlvbnMgfSBmcm9tICcuLi9GbHV4JztcbmltcG9ydCBzaW5vbiBmcm9tICdzaW5vbic7XG5cbmZ1bmN0aW9uIGNyZWF0ZVNlcmlhbGl6YWJsZVN0b3JlKHNlcmlhbGl6ZWRTdGF0ZSkge1xuICByZXR1cm4gY2xhc3MgU2VyaWFsaXphYmxlU3RvcmUgZXh0ZW5kcyBTdG9yZSB7XG4gICAgc3RhdGljIHNlcmlhbGl6ZSgpIHtcbiAgICAgIHJldHVybiBzZXJpYWxpemVkU3RhdGU7XG4gICAgfVxuICAgIHN0YXRpYyBkZXNlcmlhbGl6ZShzdGF0ZVN0cmluZykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdGVTdHJpbmcsXG4gICAgICAgIGRlc2VyaWFsaXplZDogdHJ1ZVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XG5cbmRlc2NyaWJlKCdGbHV4JywgKCkgPT4ge1xuXG4gIGRlc2NyaWJlKCcjY3JlYXRlU3RvcmUoKScsICgpID0+IHtcbiAgICBpdCgndGhyb3dzIGlmIGtleSBhbHJlYWR5IGV4aXN0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY2xhc3MgVGVzdFN0b3JlIGV4dGVuZHMgU3RvcmUge31cblxuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnRXhhbXBsZVN0b3JlJywgVGVzdFN0b3JlKTtcbiAgICAgIGV4cGVjdChmbHV4LmNyZWF0ZVN0b3JlLmJpbmQoZmx1eCwgJ0V4YW1wbGVTdG9yZScsIFRlc3RTdG9yZSkpLnRvLnRocm93KFxuICAgICAgICAnWW91XFwndmUgYXR0ZW1wdGVkIHRvIGNyZWF0ZSBtdWx0aXBsZSBzdG9yZXMgd2l0aCBrZXkgRXhhbXBsZVN0b3JlLiAnXG4gICAgICArICdLZXlzIG11c3QgYmUgdW5pcXVlLidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgndGhyb3dzIGlmIFN0b3JlIGlzIG5vdCBhIHByb3RvdHlwZSBvZiBjbGFzcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY2xhc3MgRm9yZ290VG9FeHRlbmRTdG9yZSB7fVxuXG4gICAgICBleHBlY3QoZmx1eC5jcmVhdGVTdG9yZS5iaW5kKGZsdXgsICdGbHV4JywgRm9yZ290VG9FeHRlbmRTdG9yZSkpLnRvLnRocm93KFxuICAgICAgICAnWW91XFwndmUgYXR0ZW1wdGVkIHRvIGNyZWF0ZSBhIHN0b3JlIGZyb20gdGhlIGNsYXNzICdcbiAgICAgICsgJ0ZvcmdvdFRvRXh0ZW5kU3RvcmUsIHdoaWNoIGRvZXMgbm90IGhhdmUgdGhlIGJhc2UgU3RvcmUgY2xhc3MgaW4gaXRzICdcbiAgICAgICsgJ3Byb3RvdHlwZSBjaGFpbi4gTWFrZSBzdXJlIHlvdVxcJ3JlIHVzaW5nIHRoZSBgZXh0ZW5kc2Aga2V5d29yZDogJ1xuICAgICAgKyAnYGNsYXNzIEZvcmdvdFRvRXh0ZW5kU3RvcmUgZXh0ZW5kcyBTdG9yZSB7IC4uLiB9YCdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVnaXN0ZXJzIHN0b3JlXFwncyBoYW5kbGVyIHdpdGggY2VudHJhbCBkaXNwYXRjaGVyJywgKCkgPT4ge1xuICAgICAgY2xhc3MgRXhhbXBsZVN0b3JlIGV4dGVuZHMgU3RvcmUge31cblxuICAgICAgY29uc3Qgc3B5MSA9IHNpbm9uLnNweSgpO1xuICAgICAgY29uc3Qgc3B5MiA9IHNpbm9uLnNweSgpO1xuXG4gICAgICBFeGFtcGxlU3RvcmUucHJvdG90eXBlLmZvbyA9ICdiYXInO1xuICAgICAgRXhhbXBsZVN0b3JlLnByb3RvdHlwZS5oYW5kbGVyID0gZnVuY3Rpb24oX3BheWxvYWQpIHtcbiAgICAgICAgc3B5MShfcGF5bG9hZCk7XG4gICAgICAgIHNweTIodGhpcy5mb28pO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdFeGFtcGxlU3RvcmUnLCBFeGFtcGxlU3RvcmUpO1xuXG4gICAgICBjb25zdCBwYXlsb2FkID0gJ2Zvb2Jhcic7XG4gICAgICBmbHV4LmRpc3BhdGNoKCdhY3Rpb25JZCcsIHBheWxvYWQpO1xuICAgICAgZXhwZWN0KHNweTEuZ2V0Q2FsbCgwKS5hcmdzWzBdLmJvZHkpLnRvLmVxdWFsKCdmb29iYXInKTtcbiAgICAgIGV4cGVjdChzcHkyLmNhbGxlZFdpdGgoJ2JhcicpKS50by5iZS50cnVlO1xuICAgIH0pO1xuXG4gICAgaXQoJ3JldHVybnMgdGhlIGNyZWF0ZWQgc3RvcmUgaW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgICBjbGFzcyBFeGFtcGxlU3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBjb25zdCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGNvbnN0IHN0b3JlID0gZmx1eC5jcmVhdGVTdG9yZSgnRXhhbXBsZVN0b3JlJywgRXhhbXBsZVN0b3JlKTtcbiAgICAgIGV4cGVjdChzdG9yZSkudG8uYmUuYW4uaW5zdGFuY2VPZihFeGFtcGxlU3RvcmUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnI2dldFN0b3JlKCknLCAoKSA9PiB7XG4gICAgaXQoJ3JldHJpZXZlcyBzdG9yZSBmb3Iga2V5JywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdFeGFtcGxlU3RvcmUnLCBUZXN0U3RvcmUpO1xuICAgICAgZXhwZWN0KGZsdXguZ2V0U3RvcmUoJ0V4YW1wbGVTdG9yZScpKS50by5iZS5hbi5pbnN0YW5jZU9mKFN0b3JlKTtcbiAgICAgIGV4cGVjdChmbHV4LmdldFN0b3JlKCdOb25leGlzdGVudFN0b3JlJykpLnRvLmJlLnVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJyNyZW1vdmVTdG9yZSgpJywgKCkgPT4ge1xuICAgIGl0KCd0aHJvd3MgaWYga2V5IGRvZXMgbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdFeGFtcGxlU3RvcmUnLCBUZXN0U3RvcmUpO1xuICAgICAgZXhwZWN0KGZsdXgucmVtb3ZlU3RvcmUuYmluZChmbHV4LCAnTm9uZXhpc3RlbnRTdG9yZScpKS50by50aHJvdyhcbiAgICAgICAgJ1lvdVxcJ3ZlIGF0dGVtcHRlZCB0byByZW1vdmUgc3RvcmUgd2l0aCBrZXkgTm9uZXhpc3RlbnRTdG9yZSB3aGljaCBkb2VzIG5vdCBleGlzdC4nXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RlbGV0ZXMgc3RvcmUgaW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGNsYXNzIFRlc3RTdG9yZSBleHRlbmRzIFN0b3JlIHt9XG5cbiAgICAgIGxldCBzdG9yZSA9IGZsdXguY3JlYXRlU3RvcmUoJ0V4YW1wbGVTdG9yZScsIFRlc3RTdG9yZSk7XG4gICAgICBleHBlY3QoZmx1eC5kaXNwYXRjaGVyLiREaXNwYXRjaGVyX2NhbGxiYWNrc1tzdG9yZS5fdG9rZW5dKS50by5iZS5mdW5jdGlvbjtcbiAgICAgIGZsdXgucmVtb3ZlU3RvcmUoJ0V4YW1wbGVTdG9yZScpO1xuICAgICAgZXhwZWN0KGZsdXguX3N0b3Jlcy5FeGFtcGxlU3RvcmUpLnRvLmJlLnVuZGVmaW5lZDtcbiAgICAgIGV4cGVjdChmbHV4LmRpc3BhdGNoZXIuJERpc3BhdGNoZXJfY2FsbGJhY2tzW3N0b3JlLl90b2tlbl0pLnRvLmJlLnVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJyNjcmVhdGVBY3Rpb25zKCknLCAoKSA9PiB7XG4gICAgaXQoJ3Rocm93cyBpZiBrZXkgYWxyZWFkeSBleGlzdHMnLCAoKSA9PiB7XG4gICAgICBjbGFzcyBUZXN0QWN0aW9ucyBleHRlbmRzIEFjdGlvbnMge31cblxuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBmbHV4LmNyZWF0ZUFjdGlvbnMoJ0V4YW1wbGVBY3Rpb25zJywgVGVzdEFjdGlvbnMpO1xuXG4gICAgICBleHBlY3QoZmx1eC5jcmVhdGVBY3Rpb25zLmJpbmQoZmx1eCwgJ0V4YW1wbGVBY3Rpb25zJywgQWN0aW9ucykpLnRvLnRocm93KFxuICAgICAgICAnWW91XFwndmUgYXR0ZW1wdGVkIHRvIGNyZWF0ZSBtdWx0aXBsZSBhY3Rpb25zIHdpdGgga2V5IEV4YW1wbGVBY3Rpb25zLiAnXG4gICAgICArICdLZXlzIG11c3QgYmUgdW5pcXVlLidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgndGhyb3dzIGlmIEFjdGlvbnMgaXMgYSBjbGFzcyB3aXRob3V0IGJhc2UgQWN0aW9ucyBjbGFzcyBpbiBpdHMgcHJvdG90eXBlIGNoYWluJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBGb3Jnb3RUb0V4dGVuZEFjdGlvbnMge31cblxuICAgICAgZXhwZWN0KGZsdXguY3JlYXRlQWN0aW9ucy5iaW5kKGZsdXgsICdGbHV4JywgRm9yZ290VG9FeHRlbmRBY3Rpb25zKSlcbiAgICAgICAgLnRvLnRocm93KFxuICAgICAgICAgICdZb3VcXCd2ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIGFjdGlvbnMgZnJvbSB0aGUgY2xhc3MgJ1xuICAgICAgICArICdGb3Jnb3RUb0V4dGVuZEFjdGlvbnMsIHdoaWNoIGRvZXMgbm90IGhhdmUgdGhlIGJhc2UgQWN0aW9ucyBjbGFzcyAnXG4gICAgICAgICsgJ2luIGl0cyBwcm90b3R5cGUgY2hhaW4uIE1ha2Ugc3VyZSB5b3VcXCdyZSB1c2luZyB0aGUgYGV4dGVuZHNgICdcbiAgICAgICAgKyAna2V5d29yZDogYGNsYXNzIEZvcmdvdFRvRXh0ZW5kQWN0aW9ucyBleHRlbmRzIEFjdGlvbnMgeyAuLi4gfWAnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2FjY2VwdHMgcGxhaW4gb2xkIEphdmFTY3JpcHQgb2JqZWN0JywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG5cbiAgICAgIGZsdXguY3JlYXRlQWN0aW9ucygnZm9vYmFyJywge1xuICAgICAgICBmb28oKSB7XG4gICAgICAgICAgcmV0dXJuICdiYXInO1xuICAgICAgICB9LFxuXG4gICAgICAgIGJhcigpIHtcbiAgICAgICAgICByZXR1cm4gJ2Jheic7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoZmx1eC5nZXRBY3Rpb25zKCdmb29iYXInKSkudG8uYmUuYW4uaW5zdGFuY2VvZihBY3Rpb25zKTtcbiAgICAgIGV4cGVjdChmbHV4LmdldEFjdGlvbnMoJ2Zvb2JhcicpLmZvbygpKS50by5lcXVhbCgnYmFyJyk7XG4gICAgICBleHBlY3QoZmx1eC5nZXRBY3Rpb25zKCdmb29iYXInKS5iYXIoKSkudG8uZXF1YWwoJ2JheicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3JldHVybnMgdGhlIGNyZWF0ZWQgYWN0aW9uXFwncyBpbnN0YW5jZScsICgpID0+IHtcbiAgICAgIGNsYXNzIFRlc3RBY3Rpb25zIGV4dGVuZHMgQWN0aW9ucyB7fVxuXG4gICAgICBjb25zdCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBmbHV4LmNyZWF0ZUFjdGlvbnMoJ1Rlc3RBY3Rpb25zJywgVGVzdEFjdGlvbnMpO1xuICAgICAgZXhwZWN0KGFjdGlvbnMpLnRvLmJlLmFuLmluc3RhbmNlT2YoVGVzdEFjdGlvbnMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnI2dldEFjdGlvbnMoKScsICgpID0+IHtcbiAgICBjbGFzcyBUZXN0QWN0aW9ucyBleHRlbmRzIEFjdGlvbnMge31cblxuICAgIGl0KCdyZXRyaWV2ZXMgYWN0aW9ucyBmb3Iga2V5JywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBmbHV4LmNyZWF0ZUFjdGlvbnMoJ1Rlc3RBY3Rpb25zJywgVGVzdEFjdGlvbnMpO1xuXG4gICAgICBleHBlY3QoZmx1eC5nZXRBY3Rpb25zKCdUZXN0QWN0aW9ucycpKS50by5iZS5hbi5pbnN0YW5jZU9mKEFjdGlvbnMpO1xuICAgICAgZXhwZWN0KGZsdXguZ2V0QWN0aW9ucygnTm9uZXhpc3RlbnRBY3Rpb25zJykpLnRvLmJlLnVuZGVmaW5lZDtcbiAgICB9KTtcblxuICB9KTtcblxuICBkZXNjcmliZSgnI2dldEFjdGlvbklkcygpIC8gI2dldENvbnN0YW50cygpJywgKCkgPT4ge1xuICAgIGNsYXNzIFRlc3RBY3Rpb25zIGV4dGVuZHMgQWN0aW9ucyB7XG4gICAgICBnZXRGb28oKSB7fVxuICAgIH1cblxuICAgIGl0KCdyZXRyaXZlcyBpZHMgb2YgYWN0aW9ucyBmb3Iga2V5JywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBmbHV4LmNyZWF0ZUFjdGlvbnMoJ1Rlc3RBY3Rpb25zJywgVGVzdEFjdGlvbnMpO1xuXG4gICAgICBleHBlY3QoZmx1eC5nZXRBY3Rpb25JZHMoJ1Rlc3RBY3Rpb25zJykuZ2V0Rm9vKS50by5iZS5hKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdChmbHV4LmdldEFjdGlvbklkcygnTm9uZXhpc3RlbnRBY3Rpb25zJykpLnRvLmJlLnVuZGVmaW5lZDtcblxuICAgICAgZXhwZWN0KGZsdXguZ2V0Q29uc3RhbnRzKCdUZXN0QWN0aW9ucycpLmdldEZvbykudG8uYmUuYSgnc3RyaW5nJyk7XG4gICAgICBleHBlY3QoZmx1eC5nZXRDb25zdGFudHMoJ05vbmV4aXN0ZW50QWN0aW9ucycpKS50by5iZS51bmRlZmluZWQ7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjcmVtb3ZlQWN0aW9ucygpJywgKCkgPT4ge1xuICAgIGl0KCd0aHJvd3MgaWYga2V5IGRvZXMgbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0QWN0aW9ucyBleHRlbmRzIEFjdGlvbnMge1xuICAgICAgfVxuXG4gICAgICBmbHV4LmNyZWF0ZUFjdGlvbnMoJ1Rlc3RBY3Rpb25zJywgVGVzdEFjdGlvbnMpO1xuICAgICAgZXhwZWN0KGZsdXgucmVtb3ZlQWN0aW9ucy5iaW5kKGZsdXgsICdOb25leGlzdGVudEFjdGlvbnMnKSkudG8udGhyb3coXG4gICAgICAgICdZb3VcXCd2ZSBhdHRlbXB0ZWQgdG8gcmVtb3ZlIGFjdGlvbnMgd2l0aCBrZXkgTm9uZXhpc3RlbnRBY3Rpb25zIHdoaWNoIGRvZXMgbm90IGV4aXN0LidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGVsZXRlcyBhY3Rpb25zIGluc3RhbmNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0QWN0aW9ucyBleHRlbmRzIFN0b3JlIHtcbiAgICAgIH1cblxuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnVGVzdEFjdGlvbnMnLCBUZXN0QWN0aW9ucyk7XG4gICAgICBmbHV4LnJlbW92ZVN0b3JlKCdUZXN0QWN0aW9ucycpO1xuICAgICAgZXhwZWN0KGZsdXguX2FjdGlvbnMuVGVzdEFjdGlvbnMpLnRvLmJlLnVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJyNnZXRBbGxBY3Rpb25JZHMoKSAvICNnZXRBbGxDb25zdGFudHMoKScsICgpID0+IHtcbiAgICBjbGFzcyBUZXN0Rm9vQWN0aW9ucyBleHRlbmRzIEFjdGlvbnMge1xuICAgICAgZ2V0Rm9vKCkge31cbiAgICAgIGdldEJhcigpIHt9XG4gICAgfVxuXG4gICAgY2xhc3MgVGVzdEJhckFjdGlvbnMgZXh0ZW5kcyBBY3Rpb25zIHtcbiAgICAgIGdldEZvbygpIHt9XG4gICAgICBnZXRCYXIoKSB7fVxuICAgIH1cblxuICAgIGl0KCdyZXRyaXZlcyBpZHMgb2YgYWxsIGFjdGlvbnMnLCAoKSA9PiB7XG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBmbHV4LmNyZWF0ZUFjdGlvbnMoJ1Rlc3RGb29BY3Rpb25zJywgVGVzdEZvb0FjdGlvbnMpO1xuICAgICAgZmx1eC5jcmVhdGVBY3Rpb25zKCdUZXN0QmFyQWN0aW9ucycsIFRlc3RCYXJBY3Rpb25zKTtcblxuICAgICAgZXhwZWN0KGZsdXguZ2V0QWxsQWN0aW9uSWRzKCkpLnRvLmJlLmFuKCdhcnJheScpO1xuICAgICAgZXhwZWN0KGZsdXguZ2V0QWxsQWN0aW9uSWRzKClbMF0pLnRvLmJlLmEoJ3N0cmluZycpO1xuICAgICAgZXhwZWN0KGZsdXguZ2V0QWxsQWN0aW9uSWRzKCkpLnRvLmhhdmUubGVuZ3RoKDQpO1xuXG4gICAgICBleHBlY3QoZmx1eC5nZXRBbGxDb25zdGFudHMoKSkudG8uYmUuYW4oJ2FycmF5Jyk7XG4gICAgICBleHBlY3QoZmx1eC5nZXRBbGxDb25zdGFudHMoKVswXSkudG8uYmUuYSgnc3RyaW5nJyk7XG4gICAgICBleHBlY3QoZmx1eC5nZXRBbGxDb25zdGFudHMoKSkudG8uaGF2ZS5sZW5ndGgoNCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjZGlzcGF0Y2goKScsICgpID0+IHtcblxuICAgIGl0KCdkZWxlZ2F0ZXMgdG8gZGlzcGF0Y2hlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY29uc3QgZGlzcGF0Y2ggPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguZGlzcGF0Y2hlciA9IHsgZGlzcGF0Y2ggfTtcbiAgICAgIGNvbnN0IGFjdGlvbklkID0gJ2FjdGlvbklkJztcblxuICAgICAgZmx1eC5kaXNwYXRjaChhY3Rpb25JZCwgJ2Zvb2JhcicpO1xuXG4gICAgICBleHBlY3QoZGlzcGF0Y2guZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgYm9keTogJ2Zvb2JhcidcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2VtaXRzIGRpc3BhdGNoIGV2ZW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjb25zdCBsaXN0ZW5lciA9IHNpbm9uLnNweSgpO1xuXG4gICAgICBmbHV4LmFkZExpc3RlbmVyKCdkaXNwYXRjaCcsIGxpc3RlbmVyKTtcblxuICAgICAgY29uc3QgYWN0aW9uSWQgPSAnYWN0aW9uSWQnO1xuXG4gICAgICBmbHV4LmRpc3BhdGNoKGFjdGlvbklkLCAnZm9vYmFyJyk7XG5cbiAgICAgIGV4cGVjdChsaXN0ZW5lci5jYWxsZWRPbmNlKS50by5iZS50cnVlO1xuICAgICAgZXhwZWN0KGxpc3RlbmVyLmZpcnN0Q2FsbC5hcmdzWzBdKS50by5kZWVwLmVxdWFsKHtcbiAgICAgICAgYWN0aW9uSWQsXG4gICAgICAgIGJvZHk6ICdmb29iYXInXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJyNkaXNwYXRjaEFzeW5jKCknLCAoKSA9PiB7XG5cbiAgICBpdCgnZGVsZWdhdGVzIHRvIGRpc3BhdGNoZXInLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY29uc3QgZGlzcGF0Y2ggPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguZGlzcGF0Y2hlciA9IHsgZGlzcGF0Y2ggfTtcbiAgICAgIGNvbnN0IGFjdGlvbklkID0gJ2FjdGlvbklkJztcblxuICAgICAgYXdhaXQgZmx1eC5kaXNwYXRjaEFzeW5jKGFjdGlvbklkLCBQcm9taXNlLnJlc29sdmUoJ2Zvb2JhcicpKTtcblxuICAgICAgZXhwZWN0KGRpc3BhdGNoLmNhbGxDb3VudCkudG8uZXF1YWwoMik7XG4gICAgICBleHBlY3QoZGlzcGF0Y2guZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgYXN5bmM6ICdiZWdpbidcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGRpc3BhdGNoLnNlY29uZENhbGwuYXJnc1swXSkudG8uZGVlcC5lcXVhbCh7XG4gICAgICAgIGFjdGlvbklkLFxuICAgICAgICBib2R5OiAnZm9vYmFyJyxcbiAgICAgICAgYXN5bmM6ICdzdWNjZXNzJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZW1pdHMgZGlzcGF0Y2ggZXZlbnQnLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSBzaW5vbi5zcHkoKTtcblxuICAgICAgZmx1eC5hZGRMaXN0ZW5lcignZGlzcGF0Y2gnLCBsaXN0ZW5lcik7XG5cbiAgICAgIGNvbnN0IGFjdGlvbklkID0gJ2FjdGlvbklkJztcblxuICAgICAgYXdhaXQgZmx1eC5kaXNwYXRjaEFzeW5jKGFjdGlvbklkLCBQcm9taXNlLnJlc29sdmUoJ2Zvb2JhcicpKTtcblxuICAgICAgZXhwZWN0KGxpc3RlbmVyLmNhbGxlZFR3aWNlKS50by5iZS50cnVlO1xuICAgICAgZXhwZWN0KGxpc3RlbmVyLmZpcnN0Q2FsbC5hcmdzWzBdKS50by5kZWVwLmVxdWFsKHtcbiAgICAgICAgYWN0aW9uSWQsXG4gICAgICAgIGFzeW5jOiAnYmVnaW4nXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChsaXN0ZW5lci5zZWNvbmRDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgYXN5bmM6ICdzdWNjZXNzJyxcbiAgICAgICAgYm9keTogJ2Zvb2JhcidcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Jlc29sdmVzIHRvIHZhbHVlIG9mIGdpdmVuIHByb21pc2UnLCBkb25lID0+IHtcbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY29uc3QgZGlzcGF0Y2ggPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguZGlzcGF0Y2hlciA9IHsgZGlzcGF0Y2ggfTtcbiAgICAgIGNvbnN0IGFjdGlvbklkID0gJ2FjdGlvbklkJztcblxuICAgICAgZXhwZWN0KGZsdXguZGlzcGF0Y2hBc3luYyhhY3Rpb25JZCwgUHJvbWlzZS5yZXNvbHZlKCdmb29iYXInKSkpXG4gICAgICAgIC50by5ldmVudHVhbGx5LmVxdWFsKCdmb29iYXInKVxuICAgICAgICAubm90aWZ5KGRvbmUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc3BhdGNoZXMgd2l0aCBlcnJvciBpZiBwcm9taXNlIHJlamVjdHMnLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY29uc3QgZGlzcGF0Y2ggPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguZGlzcGF0Y2hlciA9IHsgZGlzcGF0Y2ggfTtcbiAgICAgIGNvbnN0IGFjdGlvbklkID0gJ2FjdGlvbklkJztcblxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ2Vycm9yJyk7XG5cbiAgICAgIGF3YWl0IGZsdXguZGlzcGF0Y2hBc3luYyhhY3Rpb25JZCwgUHJvbWlzZS5yZWplY3QoZXJyb3IpKTtcblxuICAgICAgZXhwZWN0KGRpc3BhdGNoLmNhbGxDb3VudCkudG8uZXF1YWwoMik7XG4gICAgICBleHBlY3QoZGlzcGF0Y2guZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgYXN5bmM6ICdiZWdpbidcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGRpc3BhdGNoLnNlY29uZENhbGwuYXJnc1swXSkudG8uZGVlcC5lcXVhbCh7XG4gICAgICAgIGFjdGlvbklkLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgYXN5bmM6ICdmYWlsdXJlJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZW1pdCBlcnJvcnMgdGhhdCBvY2N1ciBhcyByZXN1bHQgb2YgZGlzcGF0Y2gnLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIGNsYXNzIEV4YW1wbGVTdG9yZSBleHRlbmRzIFN0b3JlIHt9XG5cbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguYWRkTGlzdGVuZXIoJ2Vycm9yJywgbGlzdGVuZXIpO1xuXG4gICAgICBjb25zdCBhY3Rpb25JZCA9ICdhY3Rpb25JZCc7XG4gICAgICBjb25zdCBzdG9yZSA9IGZsdXguY3JlYXRlU3RvcmUoJ2V4YW1wbGUnLCBFeGFtcGxlU3RvcmUpO1xuXG4gICAgICBzdG9yZS5yZWdpc3RlckFzeW5jKFxuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3VjY2VzcyBlcnJvcicpO1xuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdmYWlsdXJlIGVycm9yJyk7XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChmbHV4LmRpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIFByb21pc2UucmVzb2x2ZSgnZm9vYmFyJykpKVxuICAgICAgICAudG8uYmUucmVqZWN0ZWRXaXRoKCdzdWNjZXNzIGVycm9yJyk7XG4gICAgICBleHBlY3QobGlzdGVuZXIuY2FsbGVkT25jZSkudG8uYmUudHJ1ZTtcbiAgICAgIGV4cGVjdChsaXN0ZW5lci5maXJzdENhbGwuYXJnc1swXS5tZXNzYWdlKS50by5lcXVhbCgnc3VjY2VzcyBlcnJvcicpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZmx1eC5kaXNwYXRjaEFzeW5jKGFjdGlvbklkLCBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ2Zvb2JhcicpKSkpXG4gICAgICAgIC50by5iZS5yZWplY3RlZFdpdGgoJ2ZhaWx1cmUgZXJyb3InKTtcbiAgICAgIGV4cGVjdChsaXN0ZW5lci5jYWxsZWRUd2ljZSkudG8uYmUudHJ1ZTtcbiAgICAgIGV4cGVjdChsaXN0ZW5lci5zZWNvbmRDYWxsLmFyZ3NbMF0ubWVzc2FnZSkudG8uZXF1YWwoJ2ZhaWx1cmUgZXJyb3InKTtcbiAgICB9KTtcblxuICB9KTtcblxuICBkZXNjcmliZSgnI3JlbW92ZUFsbFN0b3JlTGlzdGVuZXJzJywgKCkgPT4ge1xuICAgIGl0KCdyZW1vdmVzIGFsbCBsaXN0ZW5lcnMgZnJvbSBzdG9yZXMnLCAoKSA9PiB7XG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBjb25zdCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGNvbnN0IHN0b3JlQSA9IGZsdXguY3JlYXRlU3RvcmUoJ3N0b3JlQScsIFRlc3RTdG9yZSk7XG4gICAgICBjb25zdCBzdG9yZUIgPSBmbHV4LmNyZWF0ZVN0b3JlKCdzdG9yZUInLCBUZXN0U3RvcmUpO1xuXG4gICAgICBjb25zdCBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge307XG5cbiAgICAgIHN0b3JlQS5hZGRMaXN0ZW5lcignY2hhbmdlJywgbGlzdGVuZXIpO1xuICAgICAgc3RvcmVBLmFkZExpc3RlbmVyKCdjaGFuZ2UnLCBsaXN0ZW5lcik7XG4gICAgICBzdG9yZUIuYWRkTGlzdGVuZXIoJ2NoYW5nZScsIGxpc3RlbmVyKTtcbiAgICAgIHN0b3JlQi5hZGRMaXN0ZW5lcignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gICAgICBleHBlY3Qoc3RvcmVBLmxpc3RlbmVycygnY2hhbmdlJykubGVuZ3RoKS50by5lcXVhbCgyKTtcbiAgICAgIGV4cGVjdChzdG9yZUIubGlzdGVuZXJzKCdjaGFuZ2UnKS5sZW5ndGgpLnRvLmVxdWFsKDIpO1xuXG4gICAgICBmbHV4LnJlbW92ZUFsbFN0b3JlTGlzdGVuZXJzKCk7XG5cbiAgICAgIGV4cGVjdChzdG9yZUEubGlzdGVuZXJzKCdjaGFuZ2UnKS5sZW5ndGgpLnRvLmVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN0b3JlQi5saXN0ZW5lcnMoJ2NoYW5nZScpLmxlbmd0aCkudG8uZXF1YWwoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjc2VyaWFsaXplKCknLCAoKSA9PiB7XG5cbiAgICBpdCgncmV0dXJucyBzdGF0ZSBvZiBhbGwgdGhlIHN0b3JlcyBhcyBhIEpTT04gc3RyaW5nJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG5cbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2ZvbycsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0b3JlKCdmb28gc3RhdGUnKSk7XG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdiYXInLCBjcmVhdGVTZXJpYWxpemFibGVTdG9yZSgnYmFyIHN0YXRlJykpO1xuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnYmF6JywgY3JlYXRlU2VyaWFsaXphYmxlU3RvcmUoJ2JheiBzdGF0ZScpKTtcblxuICAgICAgZXhwZWN0KEpTT04ucGFyc2UoZmx1eC5zZXJpYWxpemUoKSkpLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBmb286ICdmb28gc3RhdGUnLFxuICAgICAgICBiYXI6ICdiYXIgc3RhdGUnLFxuICAgICAgICBiYXo6ICdiYXogc3RhdGUnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdpZ25vcmVzIHN0b3JlcyB3aG9zZSBjbGFzc2VzIGRvIG5vdCBpbXBsZW1lbnQgLnNlcmlhbGl6ZSgpJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdmb28nLCBjcmVhdGVTZXJpYWxpemFibGVTdG9yZSgnZm9vIHN0YXRlJykpO1xuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnYmFyJywgY3JlYXRlU2VyaWFsaXphYmxlU3RvcmUoJ2JhciBzdGF0ZScpKTtcbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2JheicsIFRlc3RTdG9yZSk7XG5cbiAgICAgIGV4cGVjdChKU09OLnBhcnNlKGZsdXguc2VyaWFsaXplKCkpKS50by5kZWVwLmVxdWFsKHtcbiAgICAgICAgZm9vOiAnZm9vIHN0YXRlJyxcbiAgICAgICAgYmFyOiAnYmFyIHN0YXRlJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnd2FybnMgaWYgYW55IHN0b3JlIGNsYXNzZXMgLnNlcmlhbGl6ZSgpIHJldHVybnMgYSBub24tc3RyaW5nJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjb25zdCB3YXJuID0gc2lub24uc3B5KGNvbnNvbGUsICd3YXJuJyk7XG5cbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2ZvbycsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0b3JlKHt9KSk7XG4gICAgICBmbHV4LnNlcmlhbGl6ZSgpO1xuXG4gICAgICBleHBlY3Qod2Fybi5maXJzdENhbGwuYXJnc1swXSkudG8uZXF1YWwoXG4gICAgICAgICdUaGUgc3RvcmUgd2l0aCBrZXkgXFwnZm9vXFwnIHdhcyBub3Qgc2VyaWFsaXplZCBiZWNhdXNlIHRoZSBzdGF0aWMgJ1xuICAgICAgKyAnbWV0aG9kIGBTZXJpYWxpemFibGVTdG9yZS5zZXJpYWxpemUoKWAgcmV0dXJuZWQgYSBub24tc3RyaW5nIHdpdGggJ1xuICAgICAgKyAndHlwZSBcXCdvYmplY3RcXCcuJ1xuICAgICAgKTtcblxuICAgICAgY29uc29sZS53YXJuLnJlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCd3YXJucyBhbmQgc2tpcHMgc3RvcmVzIHdob3NlIGNsYXNzZXMgZG8gbm90IGltcGxlbWVudCAuZGVzZXJpYWxpemUoKScsICgpID0+IHtcbiAgICAgIGNvbnN0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY29uc3Qgd2FybiA9IHNpbm9uLnNweShjb25zb2xlLCAnd2FybicpO1xuXG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7XG4gICAgICAgIHN0YXRpYyBzZXJpYWxpemUoKSB7XG4gICAgICAgICAgcmV0dXJuICdzdGF0ZSBzdHJpbmcnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ3Rlc3QnLCBUZXN0U3RvcmUpO1xuICAgICAgZmx1eC5zZXJpYWxpemUoKTtcblxuICAgICAgZXhwZWN0KHdhcm4uZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmVxdWFsKFxuICAgICAgICAnVGhlIGNsYXNzIGBUZXN0U3RvcmVgIGhhcyBhIGBzZXJpYWxpemUoKWAgbWV0aG9kLCBidXQgbm8gJ1xuICAgICAgKyAnY29ycmVzcG9uZGluZyBgZGVzZXJpYWxpemUoKWAgbWV0aG9kLidcbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGUud2Fybi5yZXN0b3JlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjZGVzZXJpYWxpemUoKScsICgpID0+IHtcblxuICAgIGl0KCdjb252ZXJ0cyBhIHNlcmlhbGl6ZWQgc3RyaW5nIGludG8gc3RhdGUgYW5kIHVzZXMgaXQgdG8gcmVwbGFjZSBzdGF0ZSBvZiBzdG9yZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmbHV4ID0gbmV3IEZsdXgoKTtcblxuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnZm9vJywgY3JlYXRlU2VyaWFsaXphYmxlU3RvcmUoKSk7XG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdiYXInLCBjcmVhdGVTZXJpYWxpemFibGVTdG9yZSgpKTtcbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2JheicsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0b3JlKCkpO1xuXG4gICAgICBmbHV4LmRlc2VyaWFsaXplKGB7XG4gICAgICAgIFwiZm9vXCI6IFwiZm9vIHN0YXRlXCIsXG4gICAgICAgIFwiYmFyXCI6IFwiYmFyIHN0YXRlXCIsXG4gICAgICAgIFwiYmF6XCI6IFwiYmF6IHN0YXRlXCJcbiAgICAgIH1gKTtcblxuICAgICAgY29uc3QgZm9vU3RvcmUgPSBmbHV4LmdldFN0b3JlKCdmb28nKTtcbiAgICAgIGNvbnN0IGJhclN0b3JlID0gZmx1eC5nZXRTdG9yZSgnYmFyJyk7XG4gICAgICBjb25zdCBiYXpTdG9yZSA9IGZsdXguZ2V0U3RvcmUoJ2JheicpO1xuXG4gICAgICBleHBlY3QoZm9vU3RvcmUuc3RhdGUuc3RhdGVTdHJpbmcpLnRvLmVxdWFsKCdmb28gc3RhdGUnKTtcbiAgICAgIGV4cGVjdChmb29TdG9yZS5zdGF0ZS5kZXNlcmlhbGl6ZWQpLnRvLmJlLnRydWU7XG4gICAgICBleHBlY3QoYmFyU3RvcmUuc3RhdGUuc3RhdGVTdHJpbmcpLnRvLmVxdWFsKCdiYXIgc3RhdGUnKTtcbiAgICAgIGV4cGVjdChiYXJTdG9yZS5zdGF0ZS5kZXNlcmlhbGl6ZWQpLnRvLmJlLnRydWU7XG4gICAgICBleHBlY3QoYmF6U3RvcmUuc3RhdGUuc3RhdGVTdHJpbmcpLnRvLmVxdWFsKCdiYXogc3RhdGUnKTtcbiAgICAgIGV4cGVjdChiYXpTdG9yZS5zdGF0ZS5kZXNlcmlhbGl6ZWQpLnRvLmJlLnRydWU7XG4gICAgfSk7XG5cbiAgICBpdCgnd2FybnMgYW5kIHNraXBzIGlmIHBhc3NlZCBzdHJpbmcgaXMgaW52YWxpZCBKU09OJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG5cbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2ZvbycsIFRlc3RTdG9yZSk7XG5cbiAgICAgIGV4cGVjdChmbHV4LmRlc2VyaWFsaXplLmJpbmQoZmx1eCwgJ25vdCBKU09OJykpLnRvLnRocm93KFxuICAgICAgICAnSW52YWxpZCB2YWx1ZSBwYXNzZWQgdG8gYEZsdXgjZGVzZXJpYWxpemUoKWA6IG5vdCBKU09OJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCd3YXJucyBhbmQgc2tpcHMgc3RvcmVzIHdob3NlIGNsYXNzZXMgZG8gbm90IGltcGxlbWVudCAuc2VyaWFsaXplKCknLCAoKSA9PiB7XG4gICAgICBjb25zdCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGNvbnN0IHdhcm4gPSBzaW5vbi5zcHkoY29uc29sZSwgJ3dhcm4nKTtcblxuICAgICAgY2xhc3MgVGVzdFN0b3JlIGV4dGVuZHMgU3RvcmUge1xuICAgICAgICBzdGF0aWMgZGVzZXJpYWxpemUoKSB7XG4gICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ3Rlc3QnLCBUZXN0U3RvcmUpO1xuICAgICAgZmx1eC5kZXNlcmlhbGl6ZSgne1widGVzdFwiOiBcInRlc3Qgc3RhdGVcIn0nKTtcblxuICAgICAgZXhwZWN0KHdhcm4uZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmVxdWFsKFxuICAgICAgICAnVGhlIGNsYXNzIGBUZXN0U3RvcmVgIGhhcyBhIGBkZXNlcmlhbGl6ZSgpYCBtZXRob2QsIGJ1dCBubyAnXG4gICAgICArICdjb3JyZXNwb25kaW5nIGBzZXJpYWxpemUoKWAgbWV0aG9kLidcbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGUud2Fybi5yZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaWdub3JlcyBzdG9yZXMgd2hvc2UgY2xhc3NlcyBkbyBub3QgaW1wbGVtZW50IC5kZXNlcmlhbGl6ZSgpJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdmb28nLCBjcmVhdGVTZXJpYWxpemFibGVTdG9yZSgpKTtcbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2JhcicsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0b3JlKCkpO1xuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnYmF6JywgVGVzdFN0b3JlKTtcblxuICAgICAgZmx1eC5kZXNlcmlhbGl6ZShge1xuICAgICAgICBcImZvb1wiOiBcImZvbyBzdGF0ZVwiLFxuICAgICAgICBcImJhclwiOiBcImJhciBzdGF0ZVwiLFxuICAgICAgICBcImJhelwiOiBcImJheiBzdGF0ZVwiXG4gICAgICB9YCk7XG5cbiAgICAgIGNvbnN0IGZvb1N0b3JlID0gZmx1eC5nZXRTdG9yZSgnZm9vJyk7XG4gICAgICBjb25zdCBiYXJTdG9yZSA9IGZsdXguZ2V0U3RvcmUoJ2JhcicpO1xuICAgICAgY29uc3QgYmF6U3RvcmUgPSBmbHV4LmdldFN0b3JlKCdiYXonKTtcblxuICAgICAgZXhwZWN0KGZvb1N0b3JlLnN0YXRlLnN0YXRlU3RyaW5nKS50by5lcXVhbCgnZm9vIHN0YXRlJyk7XG4gICAgICBleHBlY3QoZm9vU3RvcmUuc3RhdGUuZGVzZXJpYWxpemVkKS50by5iZS50cnVlO1xuICAgICAgZXhwZWN0KGJhclN0b3JlLnN0YXRlLnN0YXRlU3RyaW5nKS50by5lcXVhbCgnYmFyIHN0YXRlJyk7XG4gICAgICBleHBlY3QoYmFyU3RvcmUuc3RhdGUuZGVzZXJpYWxpemVkKS50by5iZS50cnVlO1xuICAgICAgZXhwZWN0KGJhelN0b3JlLnN0YXRlKS50by5iZS5udWxsO1xuICAgIH0pO1xuXG4gIH0pO1xuXG59KTtcbiJdfQ==