{
  "name": "msr",
  "preferGlobal": true,
  "version": "1.2.5",
  "author": {
    "name": "Muaz Khan",
    "email": "muazkh@gmail.com",
    "url": "http://www.muazkhan.com/"
  },
  "description": "Cross-Browser recording of audio/video media streams; targets WebRTC/getUserMedia/WebAudio/etc. Works both on Chrome/Firefox/Opera on desktop & android.",
  "scripts": {
    "start": "node MediaStreamRecorder.js"
  },
  "main": "./MediaStreamRecorder.js",
  "repository": {
    "type": "git",
    "url": "https://github.com/streamproc/MediaStreamRecorder.git"
  },
  "keywords": [
    "recorder",
    "audio-recorder",
    "video-recorder",
    "audio-recording",
    "video-recording",
    "recording",
    "record",
    "audio-video-recorder",
    "gif-recorder",
    "audio",
    "video",
    "gif",
    "mediarecorder",
    "media",
    "client-side",
    "webrtc",
    "mediastreamrecorder",
    "webrtc-library",
    "library",
    "javascript",
    "chrome",
    "firefox",
    "opera",
    "mediastreamrecorder.js",
    "webrtc-experiment",
    "javascript-library",
    "muaz",
    "muaz-khan",
    "stereorecorder",
    "mediarecorder",
    "whammyrecorder",
    "gifrecorder",
    "multistreamrecorder"
  ],
  "analyze": false,
  "license": "MIT",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/streamproc/MediaStreamRecorder/issues",
    "email": "muazkh@gmail.com"
  },
  "homepage": "https://www.webrtc-experiment.com/msr/",
  "_from": "msr@",
  "readme": "## [MediaStreamRecorder.js](https://github.com/streamproc/MediaStreamRecorder) - [Demos](https://www.webrtc-experiment.com/msr/) -   [![npm](https://img.shields.io/npm/v/msr.svg)](https://npmjs.org/package/msr) [![downloads](https://img.shields.io/npm/dm/msr.svg)](https://npmjs.org/package/msr)\r\n\r\nA cross-browser implementation to record audio/video streams:\r\n\r\n1. MediaStreamRecorder can record both audio and video in single WebM file on Firefox.\r\n2. MediaStreamRecorder can record audio as WAV and video as either WebM or animated gif on Chrome.\r\n\r\nMediaStreamRecorder is useful in scenarios where you're planning to submit/upload recorded blobs in realtime to the server! You can get blobs after specific time-intervals.\r\n\r\n## [Demos](https://www.webrtc-experiment.com/msr/) using [MediaStreamRecorder.js](https://github.com/streamproc/MediaStreamRecorder) library\r\n\r\n| Experiment Name        | Demo           | Source Code |\r\n| ------------- |-------------|-------------|\r\n| **Audio Recording** | [Demo](https://www.webrtc-experiment.com/msr/audio-recorder.html) | [Source](https://github.com/streamproc/MediaStreamRecorder/tree/master/demos/audio-recorder.html) |\r\n| **Video Recording** | [Demo](https://www.webrtc-experiment.com/msr/video-recorder.html) | [Source](https://github.com/streamproc/MediaStreamRecorder/tree/master/demos/video-recorder.html) |\r\n| **Gif Recording** | [Demo](https://www.webrtc-experiment.com/msr/gif-recorder.html) | [Source](https://github.com/streamproc/MediaStreamRecorder/tree/master/demos/gif-recorder.html) |\r\n| **MultiStreamRecorder Demo** | [Demo](https://www.webrtc-experiment.com/msr/MultiStreamRecorder.html) | [Source](https://github.com/streamproc/MediaStreamRecorder/tree/master/demos/MultiStreamRecorder.html) |\r\n\r\n----\r\n\r\nThere is a similar project: **RecordRTC**! [Demo](https://www.webrtc-experiment.com/RecordRTC/) - [Documentation](https://github.com/muaz-khan/WebRTC-Experiment/tree/master/RecordRTC)\r\n\r\n## How to link scripts?\r\n\r\nYou can [install scripts using NPM](https://www.npmjs.org/package/msr):\r\n\r\n```javascript\r\nnpm install msr\r\n```\r\n\r\nThen link single/standalone \"MediaStreamRecorder.js\" file:\r\n\r\n```html\r\n<script src=\"./node_modules/msr/MediaStreamRecorder.js\"> </script>\r\n```\r\n\r\n## Otherwise, you can \"directly\" link standalone file from CDN:\r\n\r\n```html\r\n<script src=\"https://cdn.webrtc-experiment.com/MediaStreamRecorder.js\"> </script>\r\n```\r\n\r\n## Otherwise, you can link specific files:\r\n\r\n* https://github.com/streamproc/MediaStreamRecorder/blob/master/How-to-Link-Specific-Files.md\r\n\r\n## Record audio+video in Firefox in single WebM\r\n\r\n```html\r\n<script src=\"https://cdn.webrtc-experiment.com/MediaStreamRecorder.js\"> </script>\r\n<script>\r\nvar mediaConstraints = {\r\n    audio: !!navigator.mozGetUserMedia, // don't forget audio!\r\n    video: true                         // don't forget video!\r\n};\r\n\r\nnavigator.getUserMedia(mediaConstraints, onMediaSuccess, onMediaError);\r\n\r\nfunction onMediaSuccess(stream) {\r\n    var mediaRecorder = new MediaStreamRecorder(stream);\r\n    mediaRecorder.mimeType = 'video/webm';\r\n    mediaRecorder.ondataavailable = function (blob) {\r\n        // POST/PUT \"Blob\" using FormData/XHR2\r\n        var blobURL = URL.createObjectURL(blob);\r\n        document.write('<a href=\"' + blobURL + '\">' + blobURL + '</a>');\r\n    };\r\n    mediaRecorder.start(3000);\r\n}\r\n\r\nfunction onMediaError(e) {\r\n    console.error('media error', e);\r\n}\r\n</script>\r\n```\r\n\r\n## Record audio+video in Chrome\r\n\r\n`MultiStreamRecorder.js` records both audio/video and returns both blobs in single `ondataavailable` event.\r\n\r\n```html\r\n<script src=\"https://cdn.webrtc-experiment.com/MediaStreamRecorder.js\"> </script>\r\n<script>\r\nvar mediaConstraints = {\r\n    audio: true,\r\n    video: true\r\n};\r\n\r\nnavigator.getUserMedia(mediaConstraints, onMediaSuccess, onMediaError);\r\n\r\nfunction onMediaSuccess(stream) {\r\n    var multiStreamRecorder = new MultiStreamRecorder(stream);\r\n    multiStreamRecorder.video = yourVideoElement; // to get maximum accuracy\r\n    multiStreamRecorder.audioChannels = 1;\r\n    multiStreamRecorder.ondataavailable = function (blobs) {\r\n        // blobs.audio\r\n        // blobs.video\r\n    };\r\n    multiStreamRecorder.start(3 * 1000);\r\n}\r\n\r\nfunction onMediaError(e) {\r\n    console.error('media error', e);\r\n}\r\n</script>\r\n```\r\n\r\n## Record only audio in Chrome/Firefox\r\n\r\n```html\r\n<script src=\"https://cdn.webrtc-experiment.com/MediaStreamRecorder.js\"> </script>\r\n```\r\n\r\n```javascript\r\nvar mediaConstraints = {\r\n    audio: true\r\n};\r\n\r\nnavigator.getUserMedia(mediaConstraints, onMediaSuccess, onMediaError);\r\n\r\nfunction onMediaSuccess(stream) {\r\n    var mediaRecorder = new MediaStreamRecorder(stream);\r\n    mediaRecorder.mimeType = 'audio/ogg';\r\n    mediaRecorder.audioChannels = 1;\r\n    mediaRecorder.ondataavailable = function (blob) {\r\n        // POST/PUT \"Blob\" using FormData/XHR2\r\n        var blobURL = URL.createObjectURL(blob);\r\n        document.write('<a href=\"' + blobURL + '\">' + blobURL + '</a>');\r\n    };\r\n    mediaRecorder.start(3000);\r\n}\r\n\r\nfunction onMediaError(e) {\r\n    console.error('media error', e);\r\n}\r\n```\r\n\r\n## Record only-video in chrome\r\n\r\n```html\r\n<script src=\"https://cdn.webrtc-experiment.com/MediaStreamRecorder.js\"> </script>\r\n<script>\r\nvar mediaConstraints = {\r\n    video: true\r\n};\r\n\r\nnavigator.getUserMedia(mediaConstraints, onMediaSuccess, onMediaError);\r\n\r\nfunction onMediaSuccess(stream) {\r\n    var mediaRecorder = new MediaStreamRecorder(stream);\r\n    mediaRecorder.mimeType = 'video/webm';\r\n\t\r\n    // for gif recording\r\n    // mediaRecorder.mimeType = 'image/gif';\r\n\t\r\n    mediaRecorder.width = 320;\r\n    mediaRecorder.height = 240;\r\n\t\r\n    mediaRecorder.ondataavailable = function (blob) {\r\n        // POST/PUT \"Blob\" using FormData/XHR2\r\n        var blobURL = URL.createObjectURL(blob);\r\n        document.write('<a href=\"' + blobURL + '\">' + blobURL + '</a>');\r\n    };\r\n    mediaRecorder.start(3000);\r\n}\r\n\r\nfunction onMediaError(e) {\r\n    console.error('media error', e);\r\n}\r\n</script>\r\n```\r\n\r\n## How to manually stop recordings?\r\n\r\n```javascript\r\nmediaRecorder.stop();\r\n```\r\n\r\n## How to upload recorded files using PHP?\r\n\r\n**PHP code:**\r\n\r\n```php\r\n<?php\r\nforeach(array('video', 'audio') as $type) {\r\n    if (isset($_FILES[\"${type}-blob\"])) {\r\n        \r\n\t\t$fileName = $_POST[\"${type}-filename\"];\r\n        $uploadDirectory = \"uploads/$fileName\";\r\n        \r\n        if (!move_uploaded_file($_FILES[\"${type}-blob\"][\"tmp_name\"], $uploadDirectory)) {\r\n            echo(\"problem moving uploaded file\");\r\n        }\r\n\t\t\r\n\t\techo($uploadDirectory);\r\n    }\r\n}\r\n?>\r\n```\r\n\r\n**JavaScript Code:**\r\n\r\n```javascript\r\nvar fileType = 'video'; // or \"audio\"\r\nvar fileName = 'ABCDEF.webm';  // or \"wav\" or \"ogg\"\r\n\r\nvar formData = new FormData();\r\nformData.append(fileType + '-filename', fileName);\r\nformData.append(fileType + '-blob', blob);\r\n\r\nxhr('save.php', formData, function (fileURL) {\r\n    window.open(fileURL);\r\n});\r\n\r\nfunction xhr(url, data, callback) {\r\n    var request = new XMLHttpRequest();\r\n    request.onreadystatechange = function () {\r\n        if (request.readyState == 4 && request.status == 200) {\r\n            callback(location.href + request.responseText);\r\n        }\r\n    };\r\n    request.open('POST', url);\r\n    request.send(data);\r\n}\r\n```\r\n\r\n# API Documentation\r\n\r\n## audioChannels\r\n\r\nIt is an integer value that accepts either 1 or 2. \"1\" means record only left-channel and skip right-one. The default value is \"2\".\r\n\r\n```javascript\r\nmediaRecorder.audioChannels = 1;\r\n```\r\n\r\n## bufferSize\r\n\r\nYou can set following audio-bufferSize values: 0, 256, 512, 1024, 2048, 4096, 8192, and 16384. \"0\" means: let chrome decide the device's default bufferSize. Default value is \"2048\".\r\n\r\n```javascript\r\nmediaRecorder.bufferSize = 0;\r\n```\r\n\r\n## sampleRate\r\n\r\nDefault \"sampleRate\" value is \"44100\". Currently you can't modify sample-rate in windows that's why this property isn't yet exposed to public API.\r\n\r\nIt accepts values only in range: 22050 to 96000\r\n\r\n```javascript\r\n// set sampleRate for NON-windows systems\r\nmediaRecorder.sampleRate = 96000;\r\n```\r\n\r\n## video\r\n\r\nIt is recommended to pass your HTMLVideoElement to get most accurate result.\r\n\r\n```javascript\r\nvideoRecorder.video = yourHTMLVideoElement;\r\nvideoRecorder.onStartedDrawingNonBlankFrames = function() {\r\n    // record audio here to fix sync issues\r\n    // Note: MultiStreamRecorder auto handles audio sync issues.\r\n    videoRecorder.clearOldRecordedFrames(); // clear all blank frames\r\n    audioRecorder.start(interval);\r\n};\r\n```\r\n\r\n## canvas\r\n\r\nUsing this property, you can pass video resolutions:\r\n\r\n```javascript\r\nmediaRecorder.canvas = {\r\n    width: 1280,\r\n    height: 720\r\n};\r\n```\r\n\r\n## videoWidth and videoHeight\r\n\r\nYou can stretch video to specific width/height:\r\n\r\n```javascript\r\nmediaRecorder.videoWidth  = 1280;\r\nmediaRecorder.videoHeight = 720;\r\n```\r\n\r\n## clearOldRecordedFrames\r\n\r\nThis method allows you clear current video-frames. You can use it to remove blank-frames.\r\n\r\n```javascript\r\nvideoRecorder.video = yourHTMLVideoElement;\r\nvideoRecorder.onStartedDrawingNonBlankFrames = function() {\r\n    videoRecorder.clearOldRecordedFrames(); // clear all blank frames\r\n    audioRecorder.start(interval);\r\n};\r\n```\r\n\r\n## stop\r\n\r\nThis method allows you stop entire recording process.\r\n\r\n```javascript\r\nmediaRecorder.stop();\r\n```\r\n\r\n## start\r\n\r\nThis method takes \"interval\" as the only argument and it starts recording process:\r\n\r\n```javascript\r\nmediaRecorder.start(5 * 1000); // it takes milliseconds\r\n```\r\n\r\n## ondataavailable\r\n\r\nThis event is fired according to your interval and \"stop\" method.\r\n\r\n```javascript\r\nmediaRecorder.ondataavailable = function(blob) {\r\n    POST_to_Server(blob);\r\n};\r\n```\r\n\r\n## onstop\r\n\r\nThis event is fired when recording is stopped, either by invoking \"stop\" method or in case of any unexpected error:\r\n\r\n```javascript\r\nmediaRecorder.onstop = function() {\r\n    // recording has been stopped.\r\n};\r\n```\r\n\r\n## mimeType\r\n\r\nThis property allows you set output media type:\r\n\r\n```javascript\r\n// video:\r\nvideoRecorder.mimeType = 'video/webm';\r\nvideoRecorder.mimeType = 'video/mp4';\r\n\r\n// audio:\r\naudioRecorder.mimeType = 'audio/ogg';\r\naudioRecorder.mimeType = 'audio/wav';\r\n\r\n// gif:\r\ngifRecorder.mimeType = 'image/gif';\r\n```\r\n\r\n## Browser Support\r\n\r\n| Browser        | Support           |\r\n| ------------- |-------------|\r\n| Firefox | [Stable](http://www.mozilla.org/en-US/firefox/new/) / [Aurora](http://www.mozilla.org/en-US/firefox/aurora/) / [Nightly](http://nightly.mozilla.org/) |\r\n| Google Chrome | [Stable](https://www.google.com/intl/en_uk/chrome/browser/) / [Canary](https://www.google.com/intl/en/chrome/browser/canary.html) / [Beta](https://www.google.com/intl/en/chrome/browser/beta.html) / [Dev](https://www.google.com/intl/en/chrome/browser/index.html?extra=devchannel#eula) |\r\n| Opera | [Stable](http://www.opera.com/) / [NEXT](http://www.opera.com/computer/next)  |\r\n| Android | [Chrome](https://play.google.com/store/apps/details?id=com.chrome.beta&hl=en) / [Firefox](https://play.google.com/store/apps/details?id=org.mozilla.firefox) / [Opera](https://play.google.com/store/apps/details?id=com.opera.browser) |\r\n\r\n## Contributors\r\n\r\n1. [Muaz Khan](https://github.com/muaz-khan)\r\n2. [neizerth](https://github.com/neizerth)\r\n3. [andersaloof](https://github.com/andersaloof)\r\n\r\n## License\r\n\r\n[MediaStreamRecorder.js](https://github.com/streamproc/MediaStreamRecorder) library is released under [MIT licence](https://www.webrtc-experiment.com/licence/).\r\n",
  "_id": "msr@1.2.5",
  "dist": {
    "shasum": "c92cae114cff1281340b945e40bc43ce89f3f364"
  },
  "_resolved": "https://registry.npmjs.org/msr/-/msr-1.2.5.tgz"
}
